
var http= require("http");
var url=require("url");



var info={
    "name":"ahmed",
"lastname":"ben othmen",
 "age":25
}
var postHtml='<!DOCTYPE html><html><head> <title>Example</title></head>' +
    ' <body> <h1>hello world</h1>' +
    '<form method="POST" action="/">' +
    'First name: <input type="text" name="fname"/> ' +
    'last name: <input type="text" name="lname"/>' +
    '<input type="submit" name="np2"/></form></body></html>';
var qs= require("querystring");
var myhttp=http.createServer(function (request,response) {
   // var queryString=url.parse(request.url,true).query;
   //  console.log(queryString);
    //response.writeHead(200);
  //response.write(postHtml);

    if (request.method=='POST') {
        var body = "";
        request.on('data', function (data) {
            body = body + data;
        });
        request.on('end', function () {
            var post = qs.parse(body);
           response.end(JSON.stringify(post));

        });
    }
  else  response.end(postHtml);
}).listen(8888);


console.log(" we listen to http://127.0.0.1:8888");